<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Sales Tracker App</title>
  
  <!-- Manifest & Theme -->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#d6006e">

  <!-- OneSignal v16 SDK -->
  <script src="https://cdn.onesignal.com/sdks/web/v16/OneSignalSDK.page.js" defer></script>

  <style>
    body { margin:0; font-family:system-ui, sans-serif; }
    header { text-align:center; padding:12px; background:#d6006e; color:#fff; }
    .logo { max-height:60px; margin:8px auto; display:block; }
  </style>
</head>
<body>
  <header>
    <img src="icon-192.png" alt="Company Logo" class="logo">
    <h1>Sales Tracker</h1>
  </header>

  <main style="padding:20px; text-align:center;">
    <p>Welcome to the Sales Tracker App.</p>
    <button id="notifyBtn">🔔 Enable Notifications</button>
    <div id="status"></div>
  </main>

  <script>
    window.OneSignalDeferred = window.OneSignalDeferred || [];
    OneSignalDeferred.push(async function(OneSignal) {
      await OneSignal.init({ appId: "5ecaba08-de2f-44b8-a4f0-369508265505" });
      
      const btn = document.getElementById('notifyBtn');
      const status = document.getElementById('status');
      
      async function checkSub() {
        const subscribed = await OneSignal.User.PushSubscription.optedIn;
        if (subscribed) {
          status.textContent = "✅ Subscribed for notifications";
          btn.style.display = "none";
        } else {
          status.textContent = "❌ Not subscribed yet";
          btn.style.display = "inline-block";
        }
      }

      btn.addEventListener('click', async () => {
        await OneSignal.Slidedown.promptPush();
        checkSub();
      });

      checkSub();
    });
  </script>
</body>
</html>

